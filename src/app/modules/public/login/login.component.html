<ng-template appPlaceholder></ng-template>

<section id="form">
  <div class="row justify-content-center">
    <div class="col-sm-12 heading-text">
      <h5> Login </h5>
      <p *ngIf="this.comapny">Select your company</p>
    </div>

    <form [formGroup]="formData" role="form" name="formData" novalidate="" (ngSubmit)="login($event, formData.value)" class="col-sm-12" #myForm>

      <div class="form-group">

        <input type="email" class="form-control" id="email" placeholder="Enter email" name="email" autocomplete="off" formControlName="email">

        <small class="text-danger " *ngIf="formData.get('email').hasError('pattern') && (formData.controls['email'].dirty || formData.controls['email'].touched)">Email must be a valid email address.</small>

        <small class="text-danger" *ngIf="formData.controls['email'].hasError('required') && (formData.controls['email'].dirty || formData.controls['email'].touched)">Email is required*</small>

      </div>

      <div class="form-group" >

        <input type="password" class="form-control" id="password" placeholder="Enter password" name="password" autocomplete="off" formControlName="password" [formControl]="formData.get('password')">

        <small class="text-danger" *ngIf="formData.get('password').hasError('required') && (formData.get('password').dirty || formData.get('password').touched)">
          This field is required</small>

        <small class="text-danger" *ngIf="formData.get('password').hasError('pattern') && (formData.get('password').dirty || formData.get('password').touched)">Incorrect password</small>

      </div>

      <div *ngIf="this.comapny" class="form-group">
        <div class="row">
          <div class="col-sm-12 company">
            <div class="box">
              <div class="media">
                <img [src]="this.comapny.avatar === null ? 'this.comapny.avatar' : '../../../../assets/img/logo.png'" class="img-fluid" [alt]="'this.comapny.comapny_full_name'">
                <div class="media-body">
                  <h5 class="mt-1 ml-2 company_name"> {{ this.comapny.company_full_name }} </h5>
                </div>

                <div class="custom-control custom-switch mt-1">
                  <input type="checkbox" class="custom-control-input" (change)="login($event, this.comapny.id)" id="switch1" name="example">
                  <label class="custom-control-label" for="switch1"></label>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <button *ngIf="!this.comapny" type="submit" class="btn btn-primary" [disabled]="formData.invalid">Login</button>

      <div *ngIf="!this.comapny" class="links row justify-content-center">
        <div class="col-sm-8 links-routes">
          <span class="register" [routerLink]="['/register']">Register</span>
          <span class="center-line-register-forgot">|</span>
          <span class="forgot" [routerLink]="['/forgot-password']">Forgot password?</span>
        </div>
      </div>
    </form>
  </div>
</section>
